<!DOCTYPE html> 
<html> 
<head>

	<meta charset="utf-8">

	<title>JSON Song List</title>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="crossorigin="anonymous"></script>

	<style type="text/css">
		body {
               font-family: "Courier New", Courier, monospace;
               text-align: center;
		} 
		h1 {
		font-family: "Courier New", Courier, monospace;
		text-align: center;
		font-size: 25px;
		} 
		h2 {
			font-family: "Courier New", Courier, monospace;
			text-align: center;
			font-size: 20px;
		}
		ul li {
		    list-style-type: none;
		}

    </style>


</head>

<body>


	<h1>Song List</h1>

	<h2>Part 2</h2>
		<div id="serialized">&nbsp;</div> 
	<h2>Part 3</h2>
		<div id="table">&nbsp;</div> 
	<h2>Part 4</h2>
		<div id="divForm"> 
			<form id="filter">
				<label for="genres">Choose genre:</label> 
				<select id = "genres">
			        <option>Choose an option</option>
			        <option>Soul/Rythm and Blues</option>
			        <option>Pop/Rythm and Blues</option>
			        <option>Disco</option>
			        <option>Reggae</option>
			        <option>Classic Rock</option>
				</select>
				<button type="button" onclick="filterGenre();">Filter</button> 
			</form>
		</div>
	<br><br>

	 
	<script language="javascript">
		$(document).ready(function() {
		    var xhttp = new XMLHttpRequest; 
		    xhttp.onreadystatechange = function() {
		      if (this.readyState == 4 && this.status == 200) {
		      	str = "<div id=\"string\">" + this.responseText + "</div><br>"; 
		      	document.getElementById("serialized").innerHTML = str;
		        var data = document.getElementById("string").innerHTML;
		        data = JSON.parse(data);
		      	console.log(data);
		      	tstr = "<br />";
		     	data.forEach(function(song) {
		        tstr += "<ul style=\"list-style-type: none;\"<li>" + "Title:   " + song.title + "</li>"+ "<li>" + "Artist: ";
		        for (var i = 0; i < song.artist.length; i++) {
		          tstr += song.artist[i];
		        }
		        tstr += "</li>" + "<li>" + "Genre(s): ";
		        for (var i = 0; i < song.genre.length; i++) {
		          tstr += song.genre[i]; 
		        }
		        tstr += "</li>" + "<li>" + "Released: " + song.releaseyear +"</li>" + "</ul><br>";
		        });

		      document.getElementById("table").innerHTML = tstr;
		      }
		    };
		    xhttp.open("GET", "https://taliasmith26.github.io/JSONSongList/songlist.json", true);
		    xhttp.send();
		});

		function filterGenre() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var data = this.responseText;
					data = JSON.parse(data);
					selectedGenre = document.getElementById("genres").value;
					console.log(selectedGenre);
					tstr = "<br />";
					data.forEach(function(song) {
						if (song.genre == selectedGenre) {
							tstr += "<ul style=\"list-style-type:none;\">";
							tstr += "Title: " + song.title + "</li>" + "<li>" + "Artist: " + song.artist + "</li>" + "<li>" + "Genre: ";
							for (var i = 0; i < song.genre.length; i++) { 
								tstr += song.genre[i];
							}
							tstr += "</li>" + "<li>" + "Year: " + song.releaseyear + "</li>" + "</ul><br>";
						}
					});
					console.log(tstr);
					document.getElementById("displayFiltered").innerHTML = tstr;
				}
			};
			xhttp.open("GET", "https://taliasmith26.github.io/JSONSongList/songlist.json",true);
			xhttp.send();
		}

	</script>

	<div id="displayFiltered">&nbsp;</div>
	

</body>

</html>


  
